#!/bin/bash

# $1 - sim/emu/hw
# $2 - bc file
# $3 - original filename
# $4 - output binary filename

BASE_FNAME=$(basename ${3})
INT_HEADER=$HOME/tmp/$BASE_FNAME-integration-header.h
INT_FOOTER=$HOME/tmp/$BASE_FNAME-integration-footer.h

INCLUDE_FILES=$HOME/git/llvm-sycl-passes/lsq

GCC_V=`gcc --version | head -n1 | cut -d" " -f4`
DPCPP_PATH=`which dpcpp`
ONE_API_DIR=${DPCPP_PATH//bin\/dpcpp/}
CLANG_V=`ls $ONE_API_DIR/lib/clang | sort -r | head -n1`


if [ "$1" == "sim" ]; then

  "$ONE_API_DIR/bin-llvm/append-file" "$3" --append=$INT_FOOTER --orig-filename="$3" --output=/tmp/ex1-747f36.cpp --use-include
  "$ONE_API_DIR/bin-llvm/clang++" -cc1 -triple x86_64-unknown-linux-gnu -sycl-std=2020 -fsycl-unnamed-lambda -fsycl-unique-prefix=0251c73b0e837ff4 -fsycl-disable-range-rounding -include $INT_HEADER -dependency-filter $INT_HEADER -fsycl-enable-int-header-diags -fsycl-is-host -emit-obj --mrelax-relocations -disable-free -clear-ast-before-backend -disable-llvm-verifier -discard-value-names -main-file-name "$3" -mrelocation-model static -fveclib=SVML -mframe-pointer=none -menable-no-infs -menable-no-nans -menable-unsafe-fp-math -fno-signed-zeros -mreassociate -freciprocal-math -fdenormal-fp-math=preserve-sign,preserve-sign -ffp-contract=fast -fno-rounding-math -ffast-math -ffinite-math-only -mconstructor-aliases -funwind-tables=2 -target-cpu x86-64 -mllvm -x86-enable-unaligned-vector-move=true -tune-cpu generic -debug-info-kind=limited -dwarf-version=4 -debugger-tuning=gdb -resource-dir $ONE_API_DIR/lib/clang/14.0.0 -internal-isystem $ONE_API_DIR/lib/oclfpga/include -internal-isystem $ONE_API_DIR/bin-llvm/../include/sycl -internal-isystem $ONE_API_DIR/bin-llvm/../include -I $INCLUDE_FILES -D FPGA=1 -I/opt/intel/oneapi/vpl/2022.1.0/include -I/opt/intel/oneapi/tbb/2021.6.0/env/../include -I/opt/intel/oneapi/mpi/2021.6.0//include -I/opt/intel/oneapi/mkl/2022.1.0/include -I/opt/intel/oneapi/ippcp/2021.6.0/include -I/opt/intel/oneapi/ipp/2021.6.0/include -I/opt/intel/oneapi/dpl/2021.7.0/linux/include -I/opt/intel/oneapi/dpcpp-ct/2022.1.0/include -I/opt/intel/oneapi/dnnl/2022.1.0/cpu_dpcpp_gpu_dpcpp/include -I/opt/intel/oneapi/dev-utilities/2021.6.0/include -I/opt/intel/oneapi/dal/2021.6.0/include -I/opt/intel/oneapi/ccl/2021.6.0/include/cpu_gpu_dpcpp -internal-isystem $ONE_API_DIR/bin-llvm/../compiler/include -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/9/../../../../include/c++/9 -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/9/../../../../include/x86_64-linux-gnu/c++/9 -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/9/../../../../include/c++/9/backward -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/9/../../../../include/c++/9 -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/9/../../../../include/x86_64-linux-gnu/c++/9 -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/9/../../../../include/c++/9/backward -internal-isystem $ONE_API_DIR/lib/clang/14.0.0/include -internal-isystem /usr/local/include -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/9/../../../../x86_64-linux-gnu/include -internal-externc-isystem /usr/include/x86_64-linux-gnu -internal-externc-isystem /include -internal-externc-isystem /usr/include -internal-isystem $ONE_API_DIR/lib/clang/14.0.0/include -internal-isystem /usr/local/include -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/9/../../../../x86_64-linux-gnu/include -internal-externc-isystem /usr/include/x86_64-linux-gnu -internal-externc-isystem /include -internal-externc-isystem /usr/include -O2 -std=c++17 -fdeprecated-macro -ferror-limit 19 -fheinous-gnu-extensions -fgnuc-version=4.2.1 -fcxx-exceptions -fexceptions -fcolor-diagnostics -vectorize-loops -vectorize-slp -dwarf-debug-flags " --driver-mode=g++ --dpcpp -fsycl -std=c++17 -O2 -I $INCLUDE_FILES -qactypes -fintelfpga -c $3 -o "$4".dev.o -D FPGA=1 -g -fveclib=SVML -fheinous-gnu-extensions" -D__GCC_HAVE_DWARF2_CFI_ASM=1 -fintel-compatibility -mllvm -disable-hir-generate-mkl-call -mllvm -intel-libirc-allowed -mllvm -loopopt=0 -floopopt-pipeline=none -mllvm -enable-lv -o /tmp/ex1-361195.o -x c++ /tmp/ex1-747f36.cpp
  "$ONE_API_DIR/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-spir64_fpga-unknown-unknown,host-x86_64-unknown-linux-gnu,sycl-fpga_dep -outputs="$4".dev.o -inputs="$2",/tmp/ex1-361195.o,/tmp/ex1-5139c3.d
  "$ONE_API_DIR/bin-llvm/clang-offload-bundler" -type=o -targets=host-x86_64-unknown-linux-gnu,sycl-spir64_fpga-unknown-unknown -inputs="$4".dev.o -outputs=/tmp/ex1-83df08.o,/tmp/ex1-354906.o -unbundle -allow-missing-bundles
  "$ONE_API_DIR/bin-llvm/llvm-link" /tmp/ex1-354906.o -o /tmp/ex1-6e0bdb.bc --suppress-warnings
  "$ONE_API_DIR/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-spir64_fpga-unknown-unknown -inputs=$ONE_API_DIR/bin-llvm/../lib/libsycl-crt.o -outputs=/tmp/libsycl-crt-843f7d.o -unbundle -allow-missing-bundles
  "$ONE_API_DIR/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-spir64_fpga-unknown-unknown -inputs=$ONE_API_DIR/bin-llvm/../lib/libsycl-complex.o -outputs=/tmp/libsycl-complex-484edd.o -unbundle -allow-missing-bundles
  "$ONE_API_DIR/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-spir64_fpga-unknown-unknown -inputs=$ONE_API_DIR/bin-llvm/../lib/libsycl-complex-fp64.o -outputs=/tmp/libsycl-complex-fp64-e51b51.o -unbundle -allow-missing-bundles
  "$ONE_API_DIR/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-spir64_fpga-unknown-unknown -inputs=$ONE_API_DIR/bin-llvm/../lib/libsycl-cmath.o -outputs=/tmp/libsycl-cmath-486826.o -unbundle -allow-missing-bundles
  "$ONE_API_DIR/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-spir64_fpga-unknown-unknown -inputs=$ONE_API_DIR/bin-llvm/../lib/libsycl-cmath-fp64.o -outputs=/tmp/libsycl-cmath-fp64-e84f41.o -unbundle -allow-missing-bundles
  "$ONE_API_DIR/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-spir64_fpga-unknown-unknown -inputs=$ONE_API_DIR/bin-llvm/../lib/libsycl-fallback-cassert.o -outputs=/tmp/libsycl-fallback-cassert-ac6dbd.o -unbundle -allow-missing-bundles
  "$ONE_API_DIR/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-spir64_fpga-unknown-unknown -inputs=$ONE_API_DIR/bin-llvm/../lib/libsycl-fallback-cstring.o -outputs=/tmp/libsycl-fallback-cstring-b05fe2.o -unbundle -allow-missing-bundles
  "$ONE_API_DIR/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-spir64_fpga-unknown-unknown -inputs=$ONE_API_DIR/bin-llvm/../lib/libsycl-fallback-complex.o -outputs=/tmp/libsycl-fallback-complex-dc8e7d.o -unbundle -allow-missing-bundles
  "$ONE_API_DIR/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-spir64_fpga-unknown-unknown -inputs=$ONE_API_DIR/bin-llvm/../lib/libsycl-fallback-complex-fp64.o -outputs=/tmp/libsycl-fallback-complex-fp64-fb5537.o -unbundle -allow-missing-bundles
  "$ONE_API_DIR/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-spir64_fpga-unknown-unknown -inputs=$ONE_API_DIR/bin-llvm/../lib/libsycl-fallback-cmath.o -outputs=/tmp/libsycl-fallback-cmath-b20f14.o -unbundle -allow-missing-bundles
  "$ONE_API_DIR/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-spir64_fpga-unknown-unknown -inputs=$ONE_API_DIR/bin-llvm/../lib/libsycl-fallback-cmath-fp64.o -outputs=/tmp/libsycl-fallback-cmath-fp64-1b078b.o -unbundle -allow-missing-bundles

  "$ONE_API_DIR/bin-llvm/llvm-link" -only-needed /tmp/ex1-6e0bdb.bc /tmp/libsycl-crt-843f7d.o /tmp/libsycl-complex-484edd.o /tmp/libsycl-complex-fp64-e51b51.o /tmp/libsycl-cmath-486826.o /tmp/libsycl-cmath-fp64-e84f41.o /tmp/libsycl-fallback-cassert-ac6dbd.o /tmp/libsycl-fallback-cstring-b05fe2.o /tmp/libsycl-fallback-complex-dc8e7d.o /tmp/libsycl-fallback-complex-fp64-fb5537.o /tmp/libsycl-fallback-cmath-b20f14.o /tmp/libsycl-fallback-cmath-fp64-1b078b.o -o /tmp/ex1-43ba39.bc --suppress-warnings

  "$ONE_API_DIR/bin/sycl-post-link" -emit-only-kernels-as-entry-points -emit-param-info -symbols -emit-exported-symbols -split-esimd -lower-esimd -O2 -spec-const=default -o /tmp/ex1-c054ed.table /tmp/ex1-43ba39.bc
  "$ONE_API_DIR/bin-llvm/file-table-tform" -extract=Code -drop_titles -o /tmp/ex1-1d872c.txt /tmp/ex1-c054ed.table
  "$ONE_API_DIR/bin-llvm/llvm-foreach" --in-file-list=/tmp/ex1-1d872c.txt --in-replace=/tmp/ex1-1d872c.txt --out-ext=spv --out-file-list=/tmp/ex1-edeecf.txt --out-replace=/tmp/ex1-edeecf.txt -- $ONE_API_DIR/bin-llvm/llvm-spirv -o /tmp/ex1-edeecf.txt -spirv-max-version=1.3 -spirv-debug-info-version=ocl-100 -spirv-allow-extra-diexpressions -spirv-allow-unknown-intrinsics=llvm.genx. -spirv-ext=-all,+SPV_EXT_shader_atomic_float_add,+SPV_EXT_shader_atomic_float_min_max,+SPV_KHR_no_integer_wrap_decoration,+SPV_KHR_float_controls,+SPV_KHR_expect_assume,+SPV_INTEL_subgroups,+SPV_INTEL_media_block_io,+SPV_INTEL_device_side_avc_motion_estimation,+SPV_INTEL_fpga_loop_controls,+SPV_INTEL_fpga_memory_attributes,+SPV_INTEL_fpga_memory_accesses,+SPV_INTEL_unstructured_loop_controls,+SPV_INTEL_fpga_reg,+SPV_INTEL_blocking_pipes,+SPV_INTEL_function_pointers,+SPV_INTEL_kernel_attributes,+SPV_INTEL_io_pipes,+SPV_INTEL_inline_assembly,+SPV_INTEL_arbitrary_precision_integers,+SPV_INTEL_float_controls2,+SPV_INTEL_vector_compute,+SPV_INTEL_fast_composite,+SPV_INTEL_fpga_buffer_location,+SPV_INTEL_joint_matrix,+SPV_INTEL_arbitrary_precision_fixed_point,+SPV_INTEL_arbitrary_precision_floating_point,+SPV_INTEL_arbitrary_precision_floating_point,+SPV_INTEL_variable_length_array,+SPV_INTEL_fp_fast_math_mode,+SPV_INTEL_fpga_cluster_attributes,+SPV_INTEL_loop_fuse,+SPV_INTEL_long_constant_composite,+SPV_INTEL_fpga_invocation_pipelining_attributes,+SPV_INTEL_fpga_dsp_control,+SPV_INTEL_arithmetic_fence,+SPV_INTEL_runtime_aligned,+SPV_INTEL_task_sequence,+SPV_INTEL_optnone,+SPV_INTEL_usm_storage_classes,-SPV_INTEL_optnone /tmp/ex1-1d872c.txt
  "$ONE_API_DIR/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-fpga_dep -inputs="$4".dev.o -outputs=/tmp/ex1.dev-2da242.d -unbundle -allow-missing-bundles
  "$ONE_API_DIR/bin-llvm/llvm-foreach" --out-ext=aocx --in-file-list=/tmp/ex1-edeecf.txt --in-replace=/tmp/ex1-edeecf.txt --out-file-list=/tmp/ex1-e96939.aocx --out-replace=/tmp/ex1-e96939.aocx --out-increment="$4".fpga_sim.prj -- $ONE_API_DIR/lib/oclfpga/bin/aoc -o /tmp/ex1-e96939.aocx /tmp/ex1-edeecf.txt -sycl -dep-files=/tmp/ex1.dev-2da242.d -output-report-folder="$4".prj -g -simulation
  #  aoc: Simulation generation done!
  "$ONE_API_DIR/bin-llvm/file-table-tform" -replace=Code,Code -o /tmp/ex1-3f9847.table /tmp/ex1-c054ed.table /tmp/ex1-e96939.aocx
  "$ONE_API_DIR/bin-llvm/clang-offload-wrapper" -o=/tmp/wrapper-ab389f.bc -host=x86_64-unknown-linux-gnu -target=spir64_fpga -kind=sycl -batch /tmp/ex1-3f9847.table
  "$ONE_API_DIR/bin-llvm/llc" -filetype=obj -o /tmp/ex1-554ec6.o /tmp/wrapper-ab389f.bc
  "/usr/bin/ld" -z relro --hash-style=gnu --eh-frame-hdr -m elf_x86_64 -dynamic-linker /lib64/ld-linux-x86-64.so.2 -o "$4" /lib/x86_64-linux-gnu/crt1.o /lib/x86_64-linux-gnu/crti.o /usr/lib/gcc/x86_64-linux-gnu/9/crtbegin.o -L$ONE_API_DIR/bin-llvm/../compiler/lib/intel64_lin -L$ONE_API_DIR/bin-llvm/../lib -L$ONE_API_DIR/lib/oclfpga/host/linux64/lib -L$ONE_API_DIR/bin-llvm/../compiler/lib/intel64_lin -L/usr/lib/gcc/x86_64-linux-gnu/9 -L/usr/lib/gcc/x86_64-linux-gnu/9/../../../../lib64 -L/lib/x86_64-linux-gnu -L/lib/../lib64 -L/usr/lib/x86_64-linux-gnu -L/usr/lib/../lib64 -L/usr/lib/gcc/x86_64-linux-gnu/9/../../.. -L$ONE_API_DIR/bin-llvm/../lib -L/lib -L/usr/lib -L/opt/intel/oneapi/vpl/2022.1.0/lib -L/opt/intel/oneapi/tbb/2021.6.0/env/../lib/intel64/gcc4.8 -L/opt/intel/oneapi/mpi/2021.6.0//libfabric/lib -L/opt/intel/oneapi/mpi/2021.6.0//lib/release -L/opt/intel/oneapi/mpi/2021.6.0//lib -L/opt/intel/oneapi/mkl/2022.1.0/lib/intel64 -L/opt/intel/oneapi/ippcp/2021.6.0/lib/intel64 -L/opt/intel/oneapi/ipp/2021.6.0/lib/intel64 -L/opt/intel/oneapi/dnnl/2022.1.0/cpu_dpcpp_gpu_dpcpp/lib -L/opt/intel/oneapi/dal/2021.6.0/lib/intel64 -L$ONE_API_DIR/compiler/lib/intel64_lin -L$ONE_API_DIR/lib -L/opt/intel/oneapi/ccl/2021.6.0/lib/cpu_gpu_dpcpp /tmp/ex1-83df08.o /tmp/ex1-554ec6.o -ldspba_mpir -ldspba_mpfr -lac_types_fixed_point_math_x86 -lac_types_vpfp_library -Bstatic -lsvml -Bdynamic -Bstatic -lirng -Bdynamic -lstdc++ -Bstatic -limf -Bdynamic -lm -lgcc_s -lgcc -Bstatic -lirc -Bdynamic -ldl -lgcc_s -lgcc -lsycl -lOpenCL -lc -lgcc_s -lgcc -Bstatic -lirc_s -Bdynamic /usr/lib/gcc/x86_64-linux-gnu/9/crtend.o /lib/x86_64-linux-gnu/crtn.o

elif [ "$1" == "emu" ]; then

  "$ONE_API_DIR/bin-llvm/llvm-link" "$2" -o /tmp/ex1-e767c9.bc --suppress-warnings
  "$ONE_API_DIR/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-spir64_fpga-unknown-unknown -inputs=$ONE_API_DIR/bin-llvm/../lib/libsycl-crt.o -outputs=/tmp/libsycl-crt-cbb732.o -unbundle -allow-missing-bundles
  "$ONE_API_DIR/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-spir64_fpga-unknown-unknown -inputs=$ONE_API_DIR/bin-llvm/../lib/libsycl-complex.o -outputs=/tmp/libsycl-complex-3e552f.o -unbundle -allow-missing-bundles
  "$ONE_API_DIR/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-spir64_fpga-unknown-unknown -inputs=$ONE_API_DIR/bin-llvm/../lib/libsycl-complex-fp64.o -outputs=/tmp/libsycl-complex-fp64-164d62.o -unbundle -allow-missing-bundles
  "$ONE_API_DIR/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-spir64_fpga-unknown-unknown -inputs=$ONE_API_DIR/bin-llvm/../lib/libsycl-cmath.o -outputs=/tmp/libsycl-cmath-0ecdd2.o -unbundle -allow-missing-bundles
  "$ONE_API_DIR/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-spir64_fpga-unknown-unknown -inputs=$ONE_API_DIR/bin-llvm/../lib/libsycl-cmath-fp64.o -outputs=/tmp/libsycl-cmath-fp64-bba126.o -unbundle -allow-missing-bundles
  "$ONE_API_DIR/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-spir64_fpga-unknown-unknown -inputs=$ONE_API_DIR/bin-llvm/../lib/libsycl-fallback-cassert.o -outputs=/tmp/libsycl-fallback-cassert-af1564.o -unbundle -allow-missing-bundles
  "$ONE_API_DIR/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-spir64_fpga-unknown-unknown -inputs=$ONE_API_DIR/bin-llvm/../lib/libsycl-fallback-cstring.o -outputs=/tmp/libsycl-fallback-cstring-792df4.o -unbundle -allow-missing-bundles
  "$ONE_API_DIR/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-spir64_fpga-unknown-unknown -inputs=$ONE_API_DIR/bin-llvm/../lib/libsycl-fallback-complex.o -outputs=/tmp/libsycl-fallback-complex-c0a0d0.o -unbundle -allow-missing-bundles
  "$ONE_API_DIR/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-spir64_fpga-unknown-unknown -inputs=$ONE_API_DIR/bin-llvm/../lib/libsycl-fallback-complex-fp64.o -outputs=/tmp/libsycl-fallback-complex-fp64-3defab.o -unbundle -allow-missing-bundles
  "$ONE_API_DIR/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-spir64_fpga-unknown-unknown -inputs=$ONE_API_DIR/bin-llvm/../lib/libsycl-fallback-cmath.o -outputs=/tmp/libsycl-fallback-cmath-257c69.o -unbundle -allow-missing-bundles
  "$ONE_API_DIR/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-spir64_fpga-unknown-unknown -inputs=$ONE_API_DIR/bin-llvm/../lib/libsycl-fallback-cmath-fp64.o -outputs=/tmp/libsycl-fallback-cmath-fp64-21836f.o -unbundle -allow-missing-bundles
  "$ONE_API_DIR/bin-llvm/llvm-link" -only-needed /tmp/ex1-e767c9.bc /tmp/libsycl-crt-cbb732.o /tmp/libsycl-complex-3e552f.o /tmp/libsycl-complex-fp64-164d62.o /tmp/libsycl-cmath-0ecdd2.o /tmp/libsycl-cmath-fp64-bba126.o /tmp/libsycl-fallback-cassert-af1564.o /tmp/libsycl-fallback-cstring-792df4.o /tmp/libsycl-fallback-complex-c0a0d0.o /tmp/libsycl-fallback-complex-fp64-3defab.o /tmp/libsycl-fallback-cmath-257c69.o /tmp/libsycl-fallback-cmath-fp64-21836f.o -o /tmp/ex1-8e8ab7.bc --suppress-warnings
  "$ONE_API_DIR/bin/sycl-post-link" -emit-only-kernels-as-entry-points -emit-param-info -symbols -emit-exported-symbols -split-esimd -lower-esimd -O2 -spec-const=default -o /tmp/ex1-f77975.table /tmp/ex1-8e8ab7.bc
  "$ONE_API_DIR/bin-llvm/file-table-tform" -extract=Code -drop_titles -o /tmp/ex1-aa28ad.txt /tmp/ex1-f77975.table
  "$ONE_API_DIR/bin-llvm/llvm-foreach" --in-file-list=/tmp/ex1-aa28ad.txt --in-replace=/tmp/ex1-aa28ad.txt --out-ext=spv --out-file-list=/tmp/ex1-4c2b89.txt --out-replace=/tmp/ex1-4c2b89.txt -- $ONE_API_DIR/bin-llvm/llvm-spirv -o /tmp/ex1-4c2b89.txt -spirv-max-version=1.3 -spirv-debug-info-version=ocl-100 -spirv-allow-extra-diexpressions -spirv-allow-unknown-intrinsics=llvm.genx. -spirv-ext=-all,+SPV_EXT_shader_atomic_float_add,+SPV_EXT_shader_atomic_float_min_max,+SPV_KHR_no_integer_wrap_decoration,+SPV_KHR_float_controls,+SPV_KHR_expect_assume,+SPV_INTEL_subgroups,+SPV_INTEL_media_block_io,+SPV_INTEL_device_side_avc_motion_estimation,+SPV_INTEL_fpga_loop_controls,+SPV_INTEL_fpga_memory_attributes,+SPV_INTEL_fpga_memory_accesses,+SPV_INTEL_unstructured_loop_controls,+SPV_INTEL_fpga_reg,+SPV_INTEL_blocking_pipes,+SPV_INTEL_function_pointers,+SPV_INTEL_kernel_attributes,+SPV_INTEL_io_pipes,+SPV_INTEL_inline_assembly,+SPV_INTEL_arbitrary_precision_integers,+SPV_INTEL_float_controls2,+SPV_INTEL_vector_compute,+SPV_INTEL_fast_composite,+SPV_INTEL_fpga_buffer_location,+SPV_INTEL_joint_matrix,+SPV_INTEL_arbitrary_precision_fixed_point,+SPV_INTEL_arbitrary_precision_floating_point,+SPV_INTEL_arbitrary_precision_floating_point,+SPV_INTEL_variable_length_array,+SPV_INTEL_fp_fast_math_mode,+SPV_INTEL_fpga_cluster_attributes,+SPV_INTEL_loop_fuse,+SPV_INTEL_long_constant_composite,+SPV_INTEL_fpga_invocation_pipelining_attributes,+SPV_INTEL_fpga_dsp_control,+SPV_INTEL_arithmetic_fence,+SPV_INTEL_runtime_aligned,+SPV_INTEL_task_sequence,+SPV_INTEL_optnone,+SPV_INTEL_token_type,+SPV_INTEL_bfloat16_conversion,+SPV_INTEL_joint_matrix,+SPV_INTEL_hw_thread_queries,+SPV_INTEL_memory_access_aliasing /tmp/ex1-aa28ad.txt
  "$ONE_API_DIR/bin-llvm/llvm-foreach" --out-ext=aocx --in-file-list=/tmp/ex1-4c2b89.txt --in-replace=/tmp/ex1-4c2b89.txt --out-file-list=/tmp/ex1-4aadd0.aocx --out-replace=/tmp/ex1-4aadd0.aocx -- $ONE_API_DIR/bin/opencl-aot -device=fpga_fast_emu -spv=/tmp/ex1-4c2b89.txt -ir=/tmp/ex1-4aadd0.aocx --bo=-g
  "$ONE_API_DIR/bin-llvm/file-table-tform" -replace=Code,Code -o /tmp/ex1-c5e409.table /tmp/ex1-f77975.table /tmp/ex1-4aadd0.aocx
  "$ONE_API_DIR/bin-llvm/clang-offload-wrapper" -o=/tmp/wrapper-822bbc.bc -host=x86_64-unknown-linux-gnu -target=spir64_fpga -kind=sycl -batch /tmp/ex1-c5e409.table
  "$ONE_API_DIR/bin-llvm/llc" -filetype=obj -o /tmp/ex1-cf0388.o /tmp/wrapper-822bbc.bc
  "$ONE_API_DIR/bin-llvm/append-file" "$3" --append=$INT_FOOTER --orig-filename="$3" --output=/tmp/ex1-8f8aa0.cpp --use-include
  "$ONE_API_DIR/bin-llvm/clang++" -cc1 -triple x86_64-unknown-linux-gnu -sycl-std=2020 -fsycl-unnamed-lambda -fsycl-unique-prefix=c868ca7c1f188435 -fsycl-disable-range-rounding -include $INT_HEADER -dependency-filter $INT_HEADER -fsycl-enable-int-header-diags -fsycl-is-host -emit-obj --mrelax-relocations -disable-free -clear-ast-before-backend -disable-llvm-verifier -discard-value-names -main-file-name "$3" -mrelocation-model static -fveclib=SVML -mframe-pointer=none -menable-no-infs -menable-no-nans -menable-unsafe-fp-math -fno-signed-zeros -mreassociate -freciprocal-math -fdenormal-fp-math=preserve-sign,preserve-sign -ffp-contract=fast -fno-rounding-math -ffast-math -ffinite-math-only -mconstructor-aliases -funwind-tables=2 -target-cpu x86-64 -mllvm -x86-enable-unaligned-vector-move=true -tune-cpu generic -debug-info-kind=limited -dwarf-version=4 -debugger-tuning=gdb -resource-dir $ONE_API_DIR/lib/clang/14.0.0 -internal-isystem $ONE_API_DIR/lib/oclfpga/include -internal-isystem $ONE_API_DIR/bin-llvm/../include/sycl -internal-isystem $ONE_API_DIR/bin-llvm/../include -I $INCLUDE_FILES -D FPGA_EMULATOR=1 -I/opt/intel/oneapi/vpl/2022.1.0/include -I/opt/intel/oneapi/tbb/2021.6.0/env/../include -I/opt/intel/oneapi/mpi/2021.6.0//include -I/opt/intel/oneapi/mkl/2022.1.0/include -I/opt/intel/oneapi/ippcp/2021.6.0/include -I/opt/intel/oneapi/ipp/2021.6.0/include -I/opt/intel/oneapi/dpl/2021.7.0/linux/include -I/opt/intel/oneapi/dpcpp-ct/2022.1.0/include -I/opt/intel/oneapi/dnnl/2022.1.0/cpu_dpcpp_gpu_dpcpp/include -I/opt/intel/oneapi/dev-utilities/2021.6.0/include -I/opt/intel/oneapi/dal/2021.6.0/include -I/opt/intel/oneapi/ccl/2021.6.0/include/cpu_gpu_dpcpp -internal-isystem $ONE_API_DIR/bin-llvm/../compiler/include -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/9/../../../../include/c++/9 -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/9/../../../../include/x86_64-linux-gnu/c++/9 -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/9/../../../../include/c++/9/backward -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/9/../../../../include/c++/9 -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/9/../../../../include/x86_64-linux-gnu/c++/9 -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/9/../../../../include/c++/9/backward -internal-isystem $ONE_API_DIR/lib/clang/14.0.0/include -internal-isystem /usr/local/include -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/9/../../../../x86_64-linux-gnu/include -internal-externc-isystem /usr/include/x86_64-linux-gnu -internal-externc-isystem /include -internal-externc-isystem /usr/include -internal-isystem $ONE_API_DIR/lib/clang/14.0.0/include -internal-isystem /usr/local/include -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/9/../../../../x86_64-linux-gnu/include -internal-externc-isystem /usr/include/x86_64-linux-gnu -internal-externc-isystem /include -internal-externc-isystem /usr/include -O2 -std=c++17 -fdeprecated-macro -ferror-limit 19 -fheinous-gnu-extensions -fgnuc-version=4.2.1 -fcxx-exceptions -fexceptions -fcolor-diagnostics -vectorize-loops -vectorize-slp -dwarf-debug-flags " --driver-mode=g++ --dpcpp -fsycl -std=c++17 -O2 -I $INCLUDE_FILES -qactypes -fintelfpga $3 -o "$3".fpga_emu -D FPGA_EMULATOR=1 -g -fveclib=SVML -fheinous-gnu-extensions" -D__GCC_HAVE_DWARF2_CFI_ASM=1 -fintel-compatibility -mllvm -disable-hir-generate-mkl-call -mllvm -intel-libirc-allowed -mllvm -loopopt=0 -floopopt-pipeline=none -mllvm -enable-lv -o /tmp/ex1-3eadb8.o -x c++ /tmp/ex1-8f8aa0.cpp
  "/usr/bin/ld" -z relro --hash-style=gnu --eh-frame-hdr -m elf_x86_64 -dynamic-linker /lib64/ld-linux-x86-64.so.2 -o "$4" /lib/x86_64-linux-gnu/crt1.o /lib/x86_64-linux-gnu/crti.o /usr/lib/gcc/x86_64-linux-gnu/9/crtbegin.o -L$ONE_API_DIR/bin-llvm/../compiler/lib/intel64_lin -L$ONE_API_DIR/bin-llvm/../lib -L$ONE_API_DIR/lib/oclfpga/host/linux64/lib -L$ONE_API_DIR/bin-llvm/../compiler/lib/intel64_lin -L/usr/lib/gcc/x86_64-linux-gnu/9 -L/usr/lib/gcc/x86_64-linux-gnu/9/../../../../lib64 -L/lib/x86_64-linux-gnu -L/lib/../lib64 -L/usr/lib/x86_64-linux-gnu -L/usr/lib/../lib64 -L/usr/lib/gcc/x86_64-linux-gnu/9/../../.. -L$ONE_API_DIR/bin-llvm/../lib -L/lib -L/usr/lib -L/opt/intel/oneapi/vpl/2022.1.0/lib -L/opt/intel/oneapi/tbb/2021.6.0/env/../lib/intel64/gcc4.8 -L/opt/intel/oneapi/mpi/2021.6.0//libfabric/lib -L/opt/intel/oneapi/mpi/2021.6.0//lib/release -L/opt/intel/oneapi/mpi/2021.6.0//lib -L/opt/intel/oneapi/mkl/2022.1.0/lib/intel64 -L/opt/intel/oneapi/ippcp/2021.6.0/lib/intel64 -L/opt/intel/oneapi/ipp/2021.6.0/lib/intel64 -L/opt/intel/oneapi/dnnl/2022.1.0/cpu_dpcpp_gpu_dpcpp/lib -L/opt/intel/oneapi/dal/2021.6.0/lib/intel64 -L$ONE_API_DIR/compiler/lib/intel64_lin -L$ONE_API_DIR/lib -L/opt/intel/oneapi/ccl/2021.6.0/lib/cpu_gpu_dpcpp /tmp/ex1-3eadb8.o /tmp/ex1-cf0388.o -ldspba_mpir -ldspba_mpfr -lac_types_fixed_point_math_x86 -lac_types_vpfp_library -Bstatic -lsvml -Bdynamic -Bstatic -lirng -Bdynamic -lstdc++ -Bstatic -limf -Bdynamic -lm -lgcc_s -lgcc -Bstatic -lirc -Bdynamic -ldl -lgcc_s -lgcc -lsycl -lOpenCL -lc -lgcc_s -lgcc -Bstatic -lirc_s -Bdynamic /usr/lib/gcc/x86_64-linux-gnu/9/crtend.o /lib/x86_64-linux-gnu/crtn.o

elif [ "$1" == "hw" ]; then

 "/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/append-file" $3 --append=$INT_FOOTER --orig-filename=$3 --output=/home/u119070/tmp/histogram-0f8f51.cpp --use-include
 "/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/clang++" -cc1 -triple x86_64-unknown-linux-gnu -sycl-std=2020 -fsycl-unnamed-lambda -fsycl-unique-prefix=a353902c1428e68f -aux-triple spir64_fpga-unknown-unknown -fsycl-disable-range-rounding -fintelfpga -include $INT_HEADER -dependency-filter $INT_HEADER -fsycl-enable-int-header-diags -fsycl-is-host -emit-obj --mrelax-relocations -disable-free -clear-ast-before-backend -disable-llvm-verifier -discard-value-names -main-file-name $3 -mrelocation-model static -fveclib=SVML -mframe-pointer=none -menable-no-infs -menable-no-nans -fapprox-func -menable-unsafe-fp-math -fno-signed-zeros -mreassociate -freciprocal-math -fdenormal-fp-math=preserve-sign,preserve-sign -ffp-contract=fast -fno-rounding-math -ffast-math -ffinite-math-only -mconstructor-aliases -funwind-tables=2 -target-cpu x86-64 -mllvm -x86-enable-unaligned-vector-move=true -tune-cpu generic -mllvm -treat-scalable-fixed-error-as-warning -debug-info-kind=limited -dwarf-version=4 -debugger-tuning=gdb -resource-dir /glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/lib/clang/15.0.0 -internal-isystem /glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/lib/oclfpga/include -internal-isystem /glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/../include/sycl -internal-isystem /glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/../include -I $INCLUDE_FILES -D FPGA=1 -I/glob/development-tools/versions/oneapi/2022.3/oneapi/vpl/2022.2.0/include -I/glob/development-tools/versions/oneapi/2022.3/oneapi/tbb/2021.7.0/env/../include -I/glob/development-tools/versions/oneapi/2022.3/oneapi/mpi/2021.7.0//include -I/glob/development-tools/versions/oneapi/2022.3/oneapi/mkl/2022.2.0/include -I/glob/development-tools/versions/oneapi/2022.3/oneapi/ipp/2021.6.1/include -I/glob/development-tools/versions/oneapi/2022.3/oneapi/ippcp/2021.6.1/include -I/glob/development-tools/versions/oneapi/2022.3/oneapi/ipp/2021.6.1/include -I/glob/development-tools/versions/oneapi/2022.3/oneapi/dpl/2021.7.1/linux/include -I/glob/development-tools/versions/oneapi/2022.3/oneapi/dpcpp-ct/2022.2.0/include -I/glob/development-tools/versions/oneapi/2022.3/oneapi/dnnl/2022.2.0/cpu_dpcpp_gpu_dpcpp/include -I/glob/development-tools/versions/oneapi/2022.3/oneapi/dev-utilities/2021.7.0/include -I/glob/development-tools/versions/oneapi/2022.3/oneapi/dal/2021.7.0/include -I/glob/development-tools/versions/oneapi/2022.3/oneapi/ccl/2021.7.0/include/cpu_gpu_dpcpp -cxx-isystem /glob/development-tools/versions/oneapi/2022.3/oneapi/clck/2021.7.0/include -internal-isystem /glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/../compiler/include -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/$GCC_V/../../../../include/c++/$GCC_V -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/$GCC_V/../../../../include/x86_64-linux-gnu/c++/$GCC_V -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/$GCC_V/../../../../include/c++/$GCC_V/backward -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/$GCC_V/../../../../include/c++/$GCC_V -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/$GCC_V/../../../../include/x86_64-linux-gnu/c++/$GCC_V -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/$GCC_V/../../../../include/c++/$GCC_V/backward -internal-isystem /glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/lib/clang/15.0.0/include -internal-isystem /usr/local/include -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/$GCC_V/../../../../x86_64-linux-gnu/include -internal-externc-isystem /usr/include/x86_64-linux-gnu -internal-externc-isystem /include -internal-externc-isystem /usr/include -internal-isystem /glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/lib/clang/15.0.0/include -internal-isystem /usr/local/include -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/$GCC_V/../../../../x86_64-linux-gnu/include -internal-externc-isystem /usr/include/x86_64-linux-gnu -internal-externc-isystem /include -internal-externc-isystem /usr/include -O2 -std=c++17 -fdeprecated-macro -ferror-limit 19 -fheinous-gnu-extensions -fgnuc-version=4.2.1 -fcxx-exceptions -fexceptions -fcolor-diagnostics -vectorize-loops -vectorize-slp -dwarf-debug-flags " --driver-mode=g++ --dpcpp -fsycl -v -v -std=c++17 -O2 -I $INCLUDE_FILES -qactypes -fintelfpga -c $3 -o $4.dev.o -D FPGA=1 -g -fveclib=SVML -fheinous-gnu-extensions" -D__GCC_HAVE_DWARF2_CFI_ASM=1 -fintel-compatibility -fintel-libirc-allowed -mllvm -disable-hir-generate-mkl-call -mllvm -loopopt=1 -floopopt-pipeline=light -mllvm -intel-abi-compatible=true -o /home/u119070/tmp/histogram-e8b985.o -x c++ /home/u119070/tmp/histogram-0f8f51.cpp
 "/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-spir64_fpga-unknown-unknown,host-x86_64-unknown-linux-gnu,sycl-fpga_dep -output=$4.dev.o -input=$2 -input=/home/u119070/tmp/histogram-e8b985.o -input=/home/u119070/tmp/histogram-a1fcd0.d
 "/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/clang-offload-bundler" -type=o -targets=host-x86_64-unknown-linux-gnu,sycl-spir64_fpga-unknown-unknown -input=$4.dev.o -output=/home/u119070/tmp/histogram2-63231d.o -output=/home/u119070/tmp/histogram2-3ca789.o -unbundle -allow-missing-bundles
 "/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/spirv-to-ir-wrapper" /home/u119070/tmp/histogram2-3ca789.o -o /home/u119070/tmp/histogram2-cb124e.bc
 "/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/llvm-link" /home/u119070/tmp/histogram2-cb124e.bc -o /home/u119070/tmp/histogram2-bea487.bc --suppress-warnings
 "/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-spir64_fpga-unknown-unknown -input=/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/../lib/libsycl-crt.o -output=/home/u119070/tmp/libsycl-crt-f33ff0.o -unbundle -allow-missing-bundles
 "/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-spir64_fpga-unknown-unknown -input=/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/../lib/libsycl-complex.o -output=/home/u119070/tmp/libsycl-complex-f63194.o -unbundle -allow-missing-bundles
 "/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-spir64_fpga-unknown-unknown -input=/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/../lib/libsycl-complex-fp64.o -output=/home/u119070/tmp/libsycl-complex-fp64-fd0948.o -unbundle -allow-missing-bundles
 "/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-spir64_fpga-unknown-unknown -input=/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/../lib/libsycl-cmath.o -output=/home/u119070/tmp/libsycl-cmath-303427.o -unbundle -allow-missing-bundles
 "/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-spir64_fpga-unknown-unknown -input=/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/../lib/libsycl-cmath-fp64.o -output=/home/u119070/tmp/libsycl-cmath-fp64-2d6d1e.o -unbundle -allow-missing-bundles
 "/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-spir64_fpga-unknown-unknown -input=/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/../lib/libsycl-imf.o -output=/home/u119070/tmp/libsycl-imf-4017f1.o -unbundle -allow-missing-bundles
 "/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-spir64_fpga-unknown-unknown -input=/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/../lib/libsycl-imf-fp64.o -output=/home/u119070/tmp/libsycl-imf-fp64-7e7af0.o -unbundle -allow-missing-bundles
 "/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-spir64_fpga-unknown-unknown -input=/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/../lib/libsycl-fallback-cassert.o -output=/home/u119070/tmp/libsycl-fallback-cassert-eede81.o -unbundle -allow-missing-bundles
 "/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-spir64_fpga-unknown-unknown -input=/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/../lib/libsycl-fallback-cstring.o -output=/home/u119070/tmp/libsycl-fallback-cstring-6b19f3.o -unbundle -allow-missing-bundles
 "/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-spir64_fpga-unknown-unknown -input=/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/../lib/libsycl-fallback-complex.o -output=/home/u119070/tmp/libsycl-fallback-complex-1107e1.o -unbundle -allow-missing-bundles
 "/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-spir64_fpga-unknown-unknown -input=/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/../lib/libsycl-fallback-complex-fp64.o -output=/home/u119070/tmp/libsycl-fallback-complex-fp64-521690.o -unbundle -allow-missing-bundles
 "/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-spir64_fpga-unknown-unknown -input=/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/../lib/libsycl-fallback-cmath.o -output=/home/u119070/tmp/libsycl-fallback-cmath-70eeae.o -unbundle -allow-missing-bundles
 "/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-spir64_fpga-unknown-unknown -input=/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/../lib/libsycl-fallback-cmath-fp64.o -output=/home/u119070/tmp/libsycl-fallback-cmath-fp64-f8cc64.o -unbundle -allow-missing-bundles
 "/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-spir64_fpga-unknown-unknown -input=/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/../lib/libsycl-fallback-imf.o -output=/home/u119070/tmp/libsycl-fallback-imf-ecff6e.o -unbundle -allow-missing-bundles
 "/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-spir64_fpga-unknown-unknown -input=/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/../lib/libsycl-fallback-imf-fp64.o -output=/home/u119070/tmp/libsycl-fallback-imf-fp64-3703ee.o -unbundle -allow-missing-bundles
 "/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-spir64_fpga-unknown-unknown -input=/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/../lib/libsycl-itt-user-wrappers.o -output=/home/u119070/tmp/libsycl-itt-user-wrappers-53169a.o -unbundle -allow-missing-bundles
 "/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-spir64_fpga-unknown-unknown -input=/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/../lib/libsycl-itt-compiler-wrappers.o -output=/home/u119070/tmp/libsycl-itt-compiler-wrappers-71b5f5.o -unbundle -allow-missing-bundles
 "/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-spir64_fpga-unknown-unknown -input=/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/../lib/libsycl-itt-stubs.o -output=/home/u119070/tmp/libsycl-itt-stubs-3ee0b4.o -unbundle -allow-missing-bundles
 "/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/llvm-link" -only-needed /home/u119070/tmp/histogram2-bea487.bc /home/u119070/tmp/libsycl-crt-f33ff0.o /home/u119070/tmp/libsycl-complex-f63194.o /home/u119070/tmp/libsycl-complex-fp64-fd0948.o /home/u119070/tmp/libsycl-cmath-303427.o /home/u119070/tmp/libsycl-cmath-fp64-2d6d1e.o /home/u119070/tmp/libsycl-imf-4017f1.o /home/u119070/tmp/libsycl-imf-fp64-7e7af0.o /home/u119070/tmp/libsycl-fallback-cassert-eede81.o /home/u119070/tmp/libsycl-fallback-cstring-6b19f3.o /home/u119070/tmp/libsycl-fallback-complex-1107e1.o /home/u119070/tmp/libsycl-fallback-complex-fp64-521690.o /home/u119070/tmp/libsycl-fallback-cmath-70eeae.o /home/u119070/tmp/libsycl-fallback-cmath-fp64-f8cc64.o /home/u119070/tmp/libsycl-fallback-imf-ecff6e.o /home/u119070/tmp/libsycl-fallback-imf-fp64-3703ee.o /home/u119070/tmp/libsycl-itt-user-wrappers-53169a.o /home/u119070/tmp/libsycl-itt-compiler-wrappers-71b5f5.o /home/u119070/tmp/libsycl-itt-stubs-3ee0b4.o -o /home/u119070/tmp/histogram2-491487.bc --suppress-warnings
 "/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin/sycl-post-link" -emit-only-kernels-as-entry-points -emit-param-info -symbols -emit-exported-symbols -split-esimd -lower-esimd -O2 -spec-const=default -o /home/u119070/tmp/histogram2-2be2fc.table /home/u119070/tmp/histogram2-491487.bc
 "/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/file-table-tform" -extract=Code -drop_titles -o /home/u119070/tmp/histogram2-14f2a8.txt /home/u119070/tmp/histogram2-2be2fc.table
 "/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/llvm-foreach" --in-file-list=/home/u119070/tmp/histogram2-14f2a8.txt --in-replace=/home/u119070/tmp/histogram2-14f2a8.txt --out-ext=spv --out-file-list=/home/u119070/tmp/histogram2-c19779.txt --out-replace=/home/u119070/tmp/histogram2-c19779.txt -- /glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/llvm-spirv -o /home/u119070/tmp/histogram2-c19779.txt -spirv-max-version=1.3 -spirv-debug-info-version=ocl-100 -spirv-allow-extra-diexpressions -spirv-allow-unknown-intrinsics=llvm.genx. -spirv-ext=-all,+SPV_EXT_shader_atomic_float_add,+SPV_EXT_shader_atomic_float_min_max,+SPV_KHR_no_integer_wrap_decoration,+SPV_KHR_float_controls,+SPV_KHR_expect_assume,+SPV_KHR_linkonce_odr,+SPV_INTEL_subgroups,+SPV_INTEL_media_block_io,+SPV_INTEL_device_side_avc_motion_estimation,+SPV_INTEL_fpga_loop_controls,+SPV_INTEL_unstructured_loop_controls,+SPV_INTEL_fpga_reg,+SPV_INTEL_blocking_pipes,+SPV_INTEL_function_pointers,+SPV_INTEL_kernel_attributes,+SPV_INTEL_io_pipes,+SPV_INTEL_inline_assembly,+SPV_INTEL_arbitrary_precision_integers,+SPV_INTEL_float_controls2,+SPV_INTEL_vector_compute,+SPV_INTEL_fast_composite,+SPV_INTEL_joint_matrix,+SPV_INTEL_arbitrary_precision_fixed_point,+SPV_INTEL_arbitrary_precision_floating_point,+SPV_INTEL_variable_length_array,+SPV_INTEL_fp_fast_math_mode,+SPV_INTEL_long_constant_composite,+SPV_INTEL_arithmetic_fence,+SPV_INTEL_task_sequence,+SPV_INTEL_optnone,+SPV_INTEL_usm_storage_classes,+SPV_INTEL_runtime_aligned,+SPV_INTEL_fpga_cluster_attributes,+SPV_INTEL_loop_fuse,+SPV_INTEL_fpga_buffer_location,+SPV_INTEL_fpga_invocation_pipelining_attributes,+SPV_INTEL_fpga_dsp_control,+SPV_INTEL_fpga_memory_accesses,+SPV_INTEL_fpga_memory_attributes,-SPV_INTEL_optnone /home/u119070/tmp/histogram2-14f2a8.txt
 "/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/clang-offload-bundler" -type=o -targets=sycl-fpga_dep -input=$4.dev.o -output=/home/u119070/tmp/histogram2.dev-da7ba2.d -unbundle -allow-missing-bundles
 "/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/llvm-foreach" --out-ext=aocx --in-file-list=/home/u119070/tmp/histogram2-c19779.txt --in-replace=/home/u119070/tmp/histogram2-c19779.txt --out-file-list=/home/u119070/tmp/histogram2-ffb034.aocx --out-replace=/home/u119070/tmp/histogram2-ffb034.aocx --out-increment=$4.fpga.prj -- /glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/lib/oclfpga/bin/aoc -o /home/u119070/tmp/histogram2-ffb034.aocx /home/u119070/tmp/histogram2-c19779.txt -sycl -dep-files=/home/u119070/tmp/histogram2.dev-da7ba2.d -output-report-folder=$4.fpga.prj -g -hardware -board=/opt/intel/oneapi/intel_a10gx_pac:pac_a10

# aoc: Compiling for FPGA. 

 "/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/file-table-tform" -replace=Code,Code -o /home/u119070/tmp/histogram2-75f58e.table /home/u119070/tmp/histogram2-2be2fc.table /home/u119070/tmp/histogram2-ffb034.aocx
 "/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/clang-offload-wrapper" -o=/home/u119070/tmp/wrapper-97e2f5.bc -host=x86_64-unknown-linux-gnu -target=spir64_fpga -kind=sycl -batch /home/u119070/tmp/histogram2-75f58e.table
 "/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/llc" -filetype=obj -o /home/u119070/tmp/histogram2-1920bd.o /home/u119070/tmp/wrapper-97e2f5.bc
 "/usr/bin/ld" -z relro --hash-style=gnu --eh-frame-hdr -m elf_x86_64 -dynamic-linker /lib64/ld-linux-x86-64.so.2 -o "$4" /usr/lib/x86_64-linux-gnu/crt1.o /usr/lib/x86_64-linux-gnu/crti.o /usr/lib/gcc/x86_64-linux-gnu/$GCC_V/crtbegin.o -L/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/../compiler/lib/intel64_lin -L/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/../lib -L/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/lib/oclfpga/host/linux64/lib -L/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/../compiler/lib/intel64_lin -L/usr/lib/gcc/x86_64-linux-gnu/$GCC_V -L/lib/x86_64-linux-gnu -L/lib/../lib64 -L/usr/lib/x86_64-linux-gnu -L/usr/lib/gcc/x86_64-linux-gnu/$GCC_V/../../.. -L/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/bin-llvm/../lib -L/lib -L/usr/lib -L/glob/development-tools/versions/oneapi/2022.3/oneapi/vpl/2022.2.0/lib -L/glob/development-tools/versions/oneapi/2022.3/oneapi/tbb/2021.7.0/env/../lib/intel64/gcc4.8 -L/glob/development-tools/versions/oneapi/2022.3/oneapi/mpi/2021.7.0//libfabric/lib -L/glob/development-tools/versions/oneapi/2022.3/oneapi/mpi/2021.7.0//lib/release -L/glob/development-tools/versions/oneapi/2022.3/oneapi/mpi/2021.7.0//lib -L/glob/development-tools/versions/oneapi/2022.3/oneapi/mkl/2022.2.0/lib/intel64 -L/glob/development-tools/versions/oneapi/2022.3/oneapi/ipp/2021.6.1/lib/intel64 -L/glob/development-tools/versions/oneapi/2022.3/oneapi/ippcp/2021.6.1/lib/intel64 -L/glob/development-tools/versions/oneapi/2022.3/oneapi/ipp/2021.6.1/lib/intel64 -L/glob/development-tools/versions/oneapi/2022.3/oneapi/dnnl/2022.2.0/cpu_dpcpp_gpu_dpcpp/lib -L/glob/development-tools/versions/oneapi/2022.3/oneapi/dal/2021.7.0/lib/intel64 -L/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/compiler/lib/intel64_lin -L/glob/development-tools/versions/oneapi/2022.3/oneapi/compiler/2022.2.0/linux/lib -L/glob/development-tools/versions/oneapi/2022.3/oneapi/clck/2021.7.0/lib/intel64 -L/glob/development-tools/versions/oneapi/2022.3/oneapi/ccl/2021.7.0/lib/cpu_gpu_dpcpp /home/u119070/tmp/histogram2-63231d.o /home/u119070/tmp/histogram2-1920bd.o -ldspba_mpir -ldspba_mpfr -lac_types_fixed_point_math_x86 -lac_types_vpfp_library -Bstatic -lsvml -Bdynamic -Bstatic -lirng -Bdynamic -lstdc++ -Bstatic -limf -Bdynamic -lm -lgcc_s -lgcc -Bstatic -lirc -Bdynamic -ldl -lgcc_s -lgcc -lsycl -lsycl-devicelib-host -lOpenCL -lc -lgcc_s -lgcc -Bstatic -lirc_s -Bdynamic /usr/lib/gcc/x86_64-linux-gnu/$GCC_V/crtend.o /usr/lib/x86_64-linux-gnu/crtn.o


fi
